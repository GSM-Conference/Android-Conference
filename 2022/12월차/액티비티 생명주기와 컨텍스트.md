액티비티 생명주기와 컨텍스트
===========================

## 액티비티 생명주기
>액티비티는 생성과 소멸까지의 생명주기를 가진다.   
>액티비티의 생명주기간에 전환하기 위해 onCreate(), onStart(), onResume(), onPause(), onStop(), onDestroy() 6가지의 콜백 메서드를 제공한다.   
>활동이 새로운 상태에 들어가면 시스템은 각 콜백을 호출한다.   

>![pic](https://developer.android.com/guide/components/images/activity_lifecycle.png?hl=ko)





   

# onCreate()

이 콜백은 시스템이 먼저 활동을 생성할 때 실행되는 것이고, 필수적으로 구현해야 한다.   
메서드에서 활동의 전체 수명주기동안 한번만 발생해야 하는 기본 애플리케이션 시작 로직을 실행한다.   
데이터를 목록에 바인딩 하거나 활동을 ViewModel과 연결하고, 일부 클래스 범위를 인스턴스화 할 수도 있다.   
onCreate()메서드가 실행을 완료하면 _시작됨_ 상태가 되고, 시스템이 연달아서 onStart()와 onResume()메서드를 호출한다.

# onStart()
활동이 _시작됨_ 상태에 들어가면 시스템은 이 콜백을 호출한다.   
onStart()가 호출되면 활동이 사용자에게 표시되고, 앱을 포그라운드에 보내 상호작용 할 수 있도록 준비한다.   
onStart()메서드는 매우 빠르게 완료되고, 이 콜백이 완료되면 활동은 _재개됨_ 상태에 들어가고, 시스템이 onResume()메서드를 호출한다.   

# onResume()
활동이 _재개됨_ 상태에 들어가면 포그라운드에 표시되고 시스템이 onResume()콜백을 호출한다.   
이 상태에서 앱은 사용자와 상호작용한다.   
어떤 이벤트가 발생하여 앱에서 포커스가 떠날 때까지 앱이 이 상태에 머무른다.   
방해되는 이벤트가 발생하면 활동은 _일시중지됨_ 상태에 들어가고, 시스템이 onPause() 콜백을 호출한다.

# onPause()
액티비티에 팝업이 띄워지거나, 포커스를 잃어버리게 되면 시스템이 onPause() 콜백을 호출한다.

# onStop()
활동이 사용자에게 더 이상 표시되지 않으면 _중단됨_ 상태에 들어가고, 시스템은 onStop() 콜백을 호출한다.   
이는 새로 시작된 활동이 화면 전체를 차지할 경우에 적용된다.   
액티비티가 실행을 종료하면 시스템은 onDestroy()를 호출한다.   

# onDestroy()
onDestroy()는 활동이 소멸되기전에 호출된다.   
시스템은
- 사용자가 활동을 완전히 닫거나 활동에서 finish()가 호출되어 활동이 종료되는 경우.
- 구성 변경(예: 기기 회전 또는 멀티 윈도우 모드)으로 인해 시스템이 일시적으로 활동을 소멸시키는 경우

활동이 종료되는 경우 onDestroy()는 활동이 수신하는 마지막 수명주기 콜백이 된다.
구성변경으로 인해 onDestroy()가 호출되는 경우, 시스템이 즉시 새 활동 인스턴스를 생성한 다음, 새로운 구성에서 그 새로운 인스턴스에 관해 onCreate()를 호출한다.

# 컨텍스트
**애플리케이션에 대해서 현재상태를 나타내는 역할**을 한다(앱이 흘러가는 맥락).   

- 어플리케이션의 현재 상태를 가지고 있음
- 시스템이 관리하고 있는 액티비티, 어플리케이션의 정보를 얻기위해 사용
- 안드로이드 시스템 서비스에서 제공하는 API(리소스, DB, Shared Preference 등) 에 접근하기 위해 사용
- Activity, Application 클래스는 Context 클래스를 상속받은 클래스

>Context는 안드로이드 앱 개발에 있어 필수적인 사항이고, 매우 중요하기 때문에 **이를 정확히 이해하고 올바르게 사용하는 것이 중요**하다. Context의 잘못된 사용은, **메모리 릭 문제**로 이어질 수 있기 때문에 정말 주의해야한다.

Context는 크게 두가지로 나눌 수 있다
- Application Context
- Activity Context   

## **Application Context**
>이 컨텍스트는 어플리케이션 라이프사이클과 묶여있어, 현재 컨텍스트가 종료되고 나서도 컨텍스트가 필요한 작업이나, 액티비티 범위를 벗어난 곳에 컨텍스트가 필요한 작업에 적합하다. 

따라서, **오랫동안 지속되거나 앱 전역에서 사용될** 경우 Application Context를 넘겨준다.

## **Activity Context**
>해당 컨텍스트는 **액티비티 안에서만 사용 가능**하다.   
>특정 **Activity의 라이프 사이클에 종속**되어 있다.   
>**Activity 스코프 내에서 사용될 때 넘겨**주거나, Activity와 **라이프 사이클이 같은 객체를 생성**할 때 넘겨준다.

즉, **Activity가 소멸되면 해당 컨텍스트도 소멸**된다.