4대 컴포넌트와 인텐트
====================

## 4대 컴포넌트
- 액티비티, 서비스, 방송 수신자(BroadCast Receiver), 콘텐츠 제공자(Content Provider)가 있다.
- 각 컴포넌트들은 하나의 독립적인 형태로 존재한다.
- 각 컴포넌트들은 고유한 기능을 수행한다.
- 각 컴포넌트들은 인텐트를 통해 서로 상호작용한다.

![pic](https://velog.velcdn.com/images%2Fjojo_devstory%2Fpost%2F9138556b-4a4c-4c48-a6dc-c9abc34e9b46%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202020-03-06%20%EC%98%A4%EC%A0%84%2011.51.43.png "컴포넌트 & 인텐트")



# 1. 액티비티(Activity)
>액티비티는 사용자가 애플리케이션과 상호작용하는 단일화면을 의미하며 모든 안드로이드 애플리케이션은 액티비티로 구성되어 있다.    
**사용자와 상호작용**을 담당하는 인터페이스라고 할 수 있다.   
그래서 안드로이드 애플리케이션은 하나이상의 액티비티를 포함하고 있으며 액티비티는 생명주기(Life Cycle)관련 메서드들을 재정의하여 원하는 기능을 구현할 수 있다.   

- 애플리케이션에는 반드시 1개이상의 액티비티가 있어야 한다.
- 인텐트(Intent)를 통해 다른 액티비티를 호출할 수 있다.
- 2개이상의 액티비티를 동시에 Display할 수 없다.
- 1개 이상의 View 또는 ViewGroup을 포함한다.
- 액티비티 내부에서 프래그먼트(Fragment)를 통해 화면을 분할시킬 수 있다.
- 액티비티 이동시에 플래그를 주거나 이전 액티비티를 종료하지 않을 경우 스택구조로 쌓이게 된다

# 2. 서비스(Service)
>서비스는 사용자와 직접적으로 상호작용하는 요소는 아님.   
>흔히 **백그라운드(Background)에서 어떠한 작업을 처리**하기 위해 사용함.
>서비스 같은 경우 사용자의 인터페이스(UI, 화면)를 방해하지 않고 눈에 보이지 않는 곳에서 작업을 처리하기때문에 별도의 스레드(Thread)에서 동작한다고 오해하는 경우가 많음.   
>하지만 서비스는 **메인 스레드에서 동작**하기 때문에 **서비스 내부에서 별도의 스레드를 생성**하여 작업을 처리함.   

- 네트워크 통신, DB통신 등을 할 수 있다
- 별도의 UI를 가지지 않으며 백그라운드에서 수행된다.
- 액티비티와 서비스는 UI스레드라고 불리는 동일한 애플리케이션 스레드로 실행된다.
- 애플리케이션이 종료되어도 이미 시작이 된 서비스는 백그라운드에서 계속 동작한다. 단, API 26 부터는 백그라운드에 있는 앱이 시스템의 리소스를 많이 잡아먹으면 유저가 다른 앱을 사용할때 좋지못한 경험을 제공할 수 있기때문에 백그라운드 서비스에 여러 제약이 걸렸다.
- bindService와 startService 두 개의 메서드로 서비스를 시작할 수 있다.(bindService는 서비스가 실행되는 동안 지속적으로 액티비티와 통신하기 위해 사용된다.)

# 3. 방송 수신자(BroadCast Receiver)
>방송 수신자(BoradCast Receiver)는 **안드로이드 OS로부터 발생하는 각종 이벤트와 정보를 받아와 핸들링**하는 컴포넌트이다.   
사용자 안드로이드 디바이스의 시스템 부팅시 앱 초기화, 네트워크 끊김 등등 특수한 이벤트에 대한 처리나 배터리 부족 알림, 문자수신과 같은 정보를 받아 처리를 해야 할 필요가 있을 때 동작한다.   
즉, 방송 수신자는 애플리케이션에서 특정한 이벤트를 받아 반응하는 컴포넌트이다.   
특정 정보를 받기 위해 브로드 캐스트 리시버를 구현하면 해당 정보가 오면 특정 이벤트를 처리할 수 있다.

- 거의 대부분 UI를 가지지 않는다.
- 안드로이드 디바이스의 특수한 상황에 대응하기 위해 사용된다.
- 특정한 상황을 제외하고는 브로드캐스트는 시스템에서 시작한다.
- 정적 브로드캐스트와 동적 브로드캐스트가 있다.
- 정적 브로드캐스트란 매니패스트에 등록하는 방송 수신자를 말한다.
    - API 26 이상부터는 암시적 브로드캐스트를 이용할 수 없다. 다만, 몇가지 암시적 브로드캐스트는 제외한다.(암시적 브로드캐스트란 앱을 구체적으로 타겟팅하지 않은 브로드캐스트를 뜻한다.)
- 동적 브로드캐스트란 콘텍스트에 등록하는 방송 수신자를 말한다.

# 4. 콘텐츠 제공자(Content Provider)
>콘텐츠 제공자는 **데이터를 관리하고 다른 애플리케이션의 데이터를 제공**하는데 사용되는 컴포넌트이다.   
>특정한 애플리케이션이 사용하고 있는 데이터베이스를 공유하기 위해 사용하며 애플리케이션 간의 데이터 공유를 위해 표준화된 인터페이스를 제공한다.

- SQLite DB / Web / 파일 입출력 등을 통해서 데이터를 관리한다.
- 외부 애플리케이션이 현재 실행 중인 애플리케이션 내에 있는 데이터베이스에 함부로 접근하지 못하게 할 수 있으며 나 자신이 공개하고 공유하고 싶은 데이터만 공유하게 도와준다.
- 작은 데이터들은 인텐트로 애플리케이션끼리 데이터가 서로 공유가 가능하지만 콘텐츠 제공자는 음악 또는 사진 파일 등과 같이 용량이 큰 데이터를 공유하는데 적합하다.
- 프로바이더는 데이터의 Read, Write에 대한 퍼미션이 있어야 애플리케이션에 접근이 가능하다.
- 데이터베이스에서 흔히 사용되는 CURD(Create, Read, Update, Delete) 원칙을 준수한다.
- 생명주기가 존재하지 않는다.

# Intent
>인텐트란 어플리케이션 컴포넌트간의 작업수행을 위한 정보를 전달하는 역할을 하며 통신수단이라고 볼 수 있다.
>인텐트를 가장 많이 사용하는 예로는 액티비티간의 화면전환이 있다.   
>인텐트는 컴포넌트A가 컴포넌트B를 호출할 때 필요한 정보를 가지고 있으며 이 정보에는 호출대상이 되는 컴포넌트B의 이름이 명시적으로 표시가 됨과 동시에 속성들이 암시적으로 표시되기도 한다.   
호출된 컴포넌트B가 호출한 컴포넌트A로 정보를 전달할때도 인텐트가 사용이 된다.

 ## 명시적 인텐트
>인텐트를 충족하는 애플리케이션이 무엇인지 지정한다.   
>앱의 대상 패키지명 또는 완전히 자격을 갖춘 구성요소클래스의 이름을 제공한다.   
>명시적 인텐트는 일반적으로 앱 안에서 구성요소를 시작할 때 쓴다.
시작하고자 하는 액티비티 또는 서비스 클래스의 이름을 알고 있기 때문이다.   
>예시로 사용자의 행동에 응답하여 새로운 액티비티를 시작하거나 백그라운드에서 파일을 다운로드하기 위해 서비스를 시작하는 것 등이 포함된다.

 ## 암시적 인텐트
>특정 구성요소의 이름을 대지 않는대신 수행할 일반적인 작업을 선언하여 다른 앱의 구성요소가 이를 처리할 수 있도록 해준다.   
>예시로 사용자에게 지도에 있는 위치를 표시해주는 경우 암시적 인텐트를 사용하여 해당 기능을 갖춘 다른 앱이 위치를 지도에 표시하도록 요청할 수 있다.   

- 서로 독립적으로 동작하는 4대컴포넌트들 간의 상호 통신을 위한 장치이다.
- 컴포넌트에 액션, 데이터 등을 전달한다.
- 인텐트를 통해 다른 애플리케이션의 컴포넌트롤 활성화 시킬 수 있다.

명시적 인텐트 예시
```kt
val downloadIntent = Intent(this, DownloadService::class.java).apply {
    data = Uri.parse(fileUrl)
}
startService(downloadIntent)
```
암시적 인텐트 예시
```kt
// Create the text message with a string
val sendIntent = Intent().apply {
    action = Intent.ACTION_SEND
    putExtra(Intent.EXTRA_TEXT, textMessage)
    type = "text/plain"
}

// Verify that the intent will resolve to an activity
if (sendIntent.resolveActivity(packageManager) != null) {
    startActivity(sendIntent)
}
```